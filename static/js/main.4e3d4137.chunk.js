(this["webpackJsonplambda-component-editor"]=this["webpackJsonplambda-component-editor"]||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(55),a=n.n(c),i=(n.p,n(66),n(67),n(5)),s=n(10),l=n.n(s),u=n(16),d=n(9),b=n(60),j=n(109),p=n(110),h=n(20),O=n(1),f=function(e){var t=e.value,n=e.onChange,r=t||{},o=r.id,c=(r.isGlobal,r.attributes);return console.log({value:t}),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)("label",{className:"block text-gray-700 text-sm mb-2",for:"componentId",children:"Unique Component ID"}),Object(O.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"componentId",type:"text",placeholder:"",value:o,onChange:function(e){n(Object(i.a)(Object(i.a)({},t),{},{id:e.target.value}))}})]}),Object(O.jsx)("div",{className:"p-2"}),Object(O.jsx)("h3",{children:"Inputs"}),Object.entries((null===t||void 0===t?void 0:t.attributes)||{}).map((function(e,r){var o=e[0],c=e[1];return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"grid grid-cols-2 gap-2 p-1 bg-gray-300 rounded my-2",children:[Object(O.jsxs)("div",{children:["Key",Object(O.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",placeholder:"",value:o,onChange:function(e){null===t||void 0===t||delete t.attributes[o],n(Object(i.a)(Object(i.a)({},t),{},{attributes:Object(i.a)(Object(i.a)({},t.attributes),{},Object(h.a)({},e.target.value,c))}))}})]}),Object(O.jsxs)("div",{children:["Label",Object(O.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",placeholder:"",value:c.label,onChange:function(e){n(Object(i.a)(Object(i.a)({},t),{},{attributes:Object(i.a)(Object(i.a)({},t.attributes),{},Object(h.a)({},o,Object(i.a)(Object(i.a)({},c),{},{label:e.target.value})))}))}})]}),Object(O.jsx)("div",{children:Object(O.jsxs)("select",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"",value:c.type,onChange:function(e){n(Object(i.a)(Object(i.a)({},t),{},{attributes:Object(i.a)(Object(i.a)({},t.attributes),{},Object(h.a)({},o,Object(i.a)(Object(i.a)({},c),{},{type:e.target.value})))}))},children:[Object(O.jsx)("option",{value:"String",children:"String"}),Object(O.jsx)("option",{value:"String",children:"Number"}),Object(O.jsx)("option",{value:"String",children:"Boolean"})]})})]})})})),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded  m-2 ",onClick:function(){n(Object(i.a)(Object(i.a)({},t),{},{attributes:Object(i.a)(Object(i.a)({},c),{},Object(h.a)({},"key",{label:"Label",type:"String"}))}))},children:"+ Add Input"})})]})})},m=o.a.memo((function(e){var t=e.url,n=Object(r.useReducer)((function(e){return e+1}),0),o=Object(d.a)(n,2),c=o[0],a=o[1],i=Object(r.useMemo)((function(){return"/lambda-components-editor/preview?url=".concat(encodeURIComponent(t))}),[c,t]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(e){return a()},className:"m-auto bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded  m-2 ",children:"Reload"}),t&&Object(O.jsx)("iframe",{style:{height:"90vh",width:"100%"},src:i},c)]})}));function g(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(l.a.mark((function e(){var t,n,r,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r,o){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saveCode",t,n,r,o),e.abrupt("return",g("".concat(t,"/save"),{accountId:n,componentId:r,sourceCode:o}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("".concat(t,"/build"),{accountId:n,componentId:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(t,"/list?accountId=").concat(n)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C={acceptSuggestionOnCommitCharacter:!0,acceptSuggestionOnEnter:"on",accessibilitySupport:"auto",autoIndent:!1,automaticLayout:!0,codeLens:!0,colorDecorators:!0,contextmenu:!0,cursorBlinking:"blink",cursorSmoothCaretAnimation:!1,cursorStyle:"line",disableLayerHinting:!1,disableMonospaceOptimizations:!1,dragAndDrop:!1,fixedOverflowWidgets:!1,folding:!0,foldingStrategy:"auto",fontLigatures:!1,formatOnPaste:!1,formatOnType:!1,hideCursorInOverviewRuler:!1,highlightActiveIndentGuide:!0,links:!0,mouseWheelZoom:!1,multiCursorMergeOverlapping:!0,multiCursorModifier:"alt",overviewRulerBorder:!0,overviewRulerLanes:2,quickSuggestions:!0,quickSuggestionsDelay:100,readOnly:!1,renderControlCharacters:!1,renderFinalNewline:!0,renderIndentGuides:!0,renderLineHighlight:"all",renderWhitespace:"none",revealHorizontalRightPadding:30,roundedSelection:!0,rulers:[],scrollBeyondLastColumn:5,scrollBeyondLastLine:!0,selectOnLineNumbers:!0,selectionClipboard:!0,selectionHighlight:!0,showFoldingControls:"mouseover",smoothScrolling:!1,suggestOnTriggerCharacters:!0,wordBasedSuggestions:!0,wordSeparators:"~!@#$%^&*()-=+[{]}|;:'\",.<>/?",wordWrap:"off",wordWrapBreakAfterCharacters:"\t})]?|&,;",wordWrapBreakBeforeCharacters:"{([+",wordWrapBreakObtrusiveCharacters:".",wordWrapColumn:80,wordWrapMinified:!0,wrappingIndent:"none",theme:"vs-dark"},N=new URLSearchParams(window.location.search),k=null===N||void 0===N?void 0:N.get("componentId"),S=null===N||void 0===N?void 0:N.get("accountId"),I=null===N||void 0===N?void 0:N.get("sourceFile"),L=null===N||void 0===N?void 0:N.get("cloudBuildService"),R=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(k),a=Object(d.a)(c,2),s=a[0],h=a[1],g=Object(r.useState)({}),v=Object(d.a)(g,2),N=v[0],R=v[1],B=Object(j.a)("componentList",(function(){return y(L,S)})).data,W=Object(r.useMemo)((function(){return(null===B||void 0===B?void 0:B.find((function(e){return e.componentId===s})))||{}}),[B]),F=Object(p.a)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(L,S,s,n));case 1:case"end":return e.stop()}}),e)})))),P=Object(p.a)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w(L,S,s));case 1:case"end":return e.stop()}}),e)}))));return console.log(F),Object(r.useEffect)(Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R((null===W||void 0===W?void 0:W.descriptor)||{}),t=I||W.sourceUrl,console.log({componentList:B,fileUrl:t}),e.next=6,fetch(t).then((function(e){return e.text()}));case 6:n=e.sent,o(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[W]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"p-4  items-center",children:Object(O.jsxs)("div",{className:"text-center w-full",children:[Object(O.jsx)("h2",{className:"text-lg",children:"\u2692\ufe0f \ud83e\uddf0 \u2692\ufe0f Lambda componet editor"}),Object(O.jsx)("p",{className:"text-sm",children:"Code react component online in browser from anywhere, build and store on cloud and consume in your storefront."}),Object(O.jsxs)("p",{children:["All Components:"," ",null===B||void 0===B?void 0:B.map((function(e){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("a",{className:"text-blue-700 font-bold",href:"?accountId=".concat(S,"&cloudBuildService=").concat(L,"&componentId=").concat(e.componentId),children:e.componentId})})}))]})]})}),Object(O.jsxs)("div",{className:"grid grid-cols-layout",children:[Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)("div",{className:"p-2",children:Object(O.jsx)(f,{value:N,onChange:function(e){R(e),h(e.id)}})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded  m-2 ",onClick:function(){return F.mutate({})},children:F.isLoading?"Saving...":"Save"}),Object(O.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded  m-2",onClick:function(){return P.mutate({})},children:P.isLoading?"Building...":"Build"})]})]}),Object(O.jsx)("div",{className:"rounded-lg overflow-hidden",children:Object(O.jsx)(b.a,Object(i.a)({height:"90vh",defaultLanguage:"javascript",defaultValue:"\nimport React from \"react\";\n\nconst defaultProps = {\n  title: 'Hello',\n  description: 'World'\n}\nconst RemoteComponent = ({\n  title,\n  description\n} = defaultProps) => {\n  return (\n    <>\n      \ud83d\ude0e \n      <h1>{title}</h1>\n      <p>{description}</p>\n    </>\n  )\n}\n\nexport default RemoteComponent;   \n      ",value:n,onChange:function(e){return o(e)}},C))}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Preview"}),W?Object(O.jsx)(m,{url:null===W||void 0===W?void 0:W.compiledUrl}):"..."]})]})]})},B=n(108),W=n(29),F=n(59),P=n(8),A=n(34),M=n(57),U=n(56),q=Object(A.createRequires)(U.resolve),E=Object(A.createRemoteComponent)({requires:q}),H=o.a.memo((function(){var e=Object(M.useLocation)(),t=new URLSearchParams(e.search).get("url"),n=Object(r.useState)(""),o=Object(d.a)(n,2),c=o[0],a=o[1],s=Object(r.useReducer)((function(e){return e+1}),0),l=Object(d.a)(s,2),u=(l[0],l[1],Object(r.useMemo)((function(){return function(e){try{return JSON.parse(e)}catch(t){return}}(c)}),[c]));return console.log({props:u}),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"shadow rounded m-4",children:Object(O.jsx)(E,Object(i.a)({url:t},u||{}))}),Object(O.jsxs)("div",{className:"m-2 text-center",children:[Object(O.jsx)("h5",{children:"Test Props"}),Object(O.jsx)("textarea",{value:c,onChange:function(e){return a(e.target.value)},language:"json",lines:"6",style:{height:"175px"},className:"w-full shadow"}),c&&!u&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("label",{children:"Note: make sure JSON is correct"}),Object(O.jsx)("br",{})]})]})]})})),J=new B.a,T=function(){return Object(O.jsx)(F.a,{basename:"/lambda-components-editor",children:Object(O.jsxs)(W.a,{client:J,children:[Object(O.jsx)(P.Route,{path:"/",exact:!0,children:Object(O.jsx)("div",{className:"App ",children:Object(O.jsx)(R,{})})}),Object(O.jsx)(P.Route,{path:"/preview",exact:!0,children:Object(O.jsx)(H,{})})]})})};n(105);a.a.render(Object(O.jsx)(T,{}),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("/lambda-components-editor","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))},56:function(e,t,n){e.exports={resolve:{react:n(0)}}},66:function(e,t,n){},67:function(e,t,n){},81:function(e,t){},83:function(e,t){}},[[106,1,2]]]);
//# sourceMappingURL=main.4e3d4137.chunk.js.map
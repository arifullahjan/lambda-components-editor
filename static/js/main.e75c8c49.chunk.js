(this["webpackJsonplambda-component-editor"]=this["webpackJsonplambda-component-editor"]||[]).push([[0],{26:function(e,n,t){},27:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(19),a=t.n(o),c=(t.p,t(26),t(27),t(11)),i=t(6),s=t.n(i),u=t(12),l=t(10),d=t(20),p=t(36),f=t(37);function b(){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(s.a.mark((function e(){var n,t,r,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:"",t=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(){var e=Object(u.a)(s.a.mark((function e(n,t,r,o){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saveCode",n,t,r,o),e.abrupt("return",b("".concat(n,"/save"),{accountId:t,componentId:r,sourceCode:o}));case 2:case"end":return e.stop()}}),e)})));return function(n,t,r,o){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(s.a.mark((function e(n,t,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b("".concat(n,"/build"),{accountId:t,componentId:r}));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(s.a.mark((function e(n,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(n,"/list?accountId=").concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),j=t(5),w={acceptSuggestionOnCommitCharacter:!0,acceptSuggestionOnEnter:"on",accessibilitySupport:"auto",autoIndent:!1,automaticLayout:!0,codeLens:!0,colorDecorators:!0,contextmenu:!0,cursorBlinking:"blink",cursorSmoothCaretAnimation:!1,cursorStyle:"line",disableLayerHinting:!1,disableMonospaceOptimizations:!1,dragAndDrop:!1,fixedOverflowWidgets:!1,folding:!0,foldingStrategy:"auto",fontLigatures:!1,formatOnPaste:!1,formatOnType:!1,hideCursorInOverviewRuler:!1,highlightActiveIndentGuide:!0,links:!0,mouseWheelZoom:!1,multiCursorMergeOverlapping:!0,multiCursorModifier:"alt",overviewRulerBorder:!0,overviewRulerLanes:2,quickSuggestions:!0,quickSuggestionsDelay:100,readOnly:!1,renderControlCharacters:!1,renderFinalNewline:!0,renderIndentGuides:!0,renderLineHighlight:"all",renderWhitespace:"none",revealHorizontalRightPadding:30,roundedSelection:!0,rulers:[],scrollBeyondLastColumn:5,scrollBeyondLastLine:!0,selectOnLineNumbers:!0,selectionClipboard:!0,selectionHighlight:!0,showFoldingControls:"mouseover",smoothScrolling:!1,suggestOnTriggerCharacters:!0,wordBasedSuggestions:!0,wordSeparators:"~!@#$%^&*()-=+[{]}|;:'\",.<>/?",wordWrap:"off",wordWrapBreakAfterCharacters:"\t})]?|&,;",wordWrapBreakBeforeCharacters:"{([+",wordWrapBreakObtrusiveCharacters:".",wordWrapColumn:80,wordWrapMinified:!0,wrappingIndent:"none"},x=new URLSearchParams(window.location.search),O=null===x||void 0===x?void 0:x.get("componentId"),y=null===x||void 0===x?void 0:x.get("accountId"),C=null===x||void 0===x?void 0:x.get("sourceFile"),k=null===x||void 0===x?void 0:x.get("cloudBuildService"),S=function(){var e=Object(r.useState)(""),n=Object(l.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(O),i=Object(l.a)(a,2),b=i[0],h=i[1],x=Object(p.a)("componentList",(function(){return v(k,y)})).data,S=Object(f.a)(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m(k,y,b,t));case 1:case"end":return e.stop()}}),e)})))),I=Object(f.a)(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(k,y,b));case 1:case"end":return e.stop()}}),e)}))));return console.log(S),Object(r.useEffect)(Object(u.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=C||(null===x||void 0===x?void 0:x.find((function(e){return e.componentId===b})).sourceUrl),console.log({componentList:x,fileUrl:n}),e.next=5,fetch(n).then((function(e){return e.text()}));case 5:t=e.sent,o(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[x]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"flex p-4 justify-between items-center",children:[Object(j.jsxs)("div",{className:"text-left",children:[Object(j.jsx)("h2",{className:"text-lg",children:"\u2692\ufe0f \ud83e\uddf0 \u2692\ufe0f Lambda componet editor"}),Object(j.jsx)("p",{className:"text-sm",children:"Code react component online in browser from anywhere, build and store on cloud and consume in your storefront."}),Object(j.jsxs)("p",{children:["All Components:"," ",null===x||void 0===x?void 0:x.map((function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("a",{className:"text-blue-700 font-bold",href:"?accountId=".concat(y,"&cloudBuildService=").concat(k,"&componentId=").concat(e.componentId),children:e.componentId})})}))]}),Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("label",{className:"block text-gray-700 text-sm mb-2",for:"componentId",children:"Unique Component ID"}),Object(j.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"componentId",type:"text",placeholder:"",value:b,onChange:function(e){h(e.target.value)}})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded  m-2 ",onClick:function(){return S.mutate({})},children:"Save"}),Object(j.jsx)("button",{disabled:!0,className:"bg-blue-200  text-white font-bold py-2 px-4 rounded  m-2 ",children:"Run"}),Object(j.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded  m-2",onClick:function(){return I.mutate({})},children:"Build"})]})]}),Object(j.jsx)(d.a,Object(c.a)({height:"90vh",defaultLanguage:"javascript",defaultValue:"\nexport default Component = ({\n  title,\n  description\n}) => {\n  return (\n    <>\n      <h1>{title}</h1>\n      <p>{description}</p>\n    </>\n  )\n}\n\nComponent.descriptor = Types.Component({\n  attributes: {\n    title: Types.String({ lable: 'Title' }),\n    description: Types.String({ lable: 'Description' })\n  }\n})      \n      ",value:t,onChange:function(e){return o(e)}},w))]})},I=t(35),L=t(16),N=new I.a,B=function(){return Object(j.jsx)(L.a,{client:N,children:Object(j.jsx)("div",{className:"App ",children:Object(j.jsx)(S,{})})})};t(32);a.a.render(Object(j.jsx)(B,{}),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("/lambda-components-editor","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[33,1,2]]]);
//# sourceMappingURL=main.e75c8c49.chunk.js.map